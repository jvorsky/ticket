# ticket

Java 1.8

##### ДЗ 1. DatabaseJourneyService

Настройки подключения к бд в application.properties

Скрипт создания таблицы journey в create.sql.

Бин для коннекта к БД: DataSource.

Бин для поиска в БД: DbJourneyService.

Настройка бинов в RootConfig.


##### ДЗ 2. Spring + Hibernate

Добавлен hibernate. 

При старте системы проект устанавливает с бд сразу 30 соединений, максимальное число соединений 150. 
Максимальное время выполнения запроса - не больше 5 минут.

Настройки подключения к бд в database.properties

##### ДЗ 3. Hibernate relations

Реализована взаимосвязь сущностей journey, stop, vehicle и seat_info. 

Таблица seat_info используется для хранения информации о свободных местах 
в транспортном средстве в разрезе конкретного маршрута.
Поля таблицы:
~~~~
id
vehicle_id - ссылка на транспортное средство
journey_id - ссылка на маршрут
free_seats - кол-во свободных мест
~~~~

В рамках репозитория и сервисного слоя реализована возможность 
создания и редактирования всех спроектированных сущностей.

##### ДЗ 4. Remove relation

Реализовано:
    
    - удаление информации по транспортному средству
    - удаление самого транспортного средства
    - удаление остановки
    - удаление маршрута

##### ДЗ 5. Получение сущностей

Для уменьшения дублирования кода ввел тип запроса

~~~~
public enum QueryType {
    HQL, NATIVE, NAMED, CRITERIA, STORED_PROCEDURE
}
~~~~
и создал абстрактный класс содержащий все варианты получения сущностей 
плюс метод для получения данных в зависимости от типа запроса.

~~~~
AbstractTransactionalService

public Collection<E> findAll(QueryType queryType)
~~~~

##### ДЗ 6. Paging and sorting

Сделано постраничное отображение сущностей findAllJourneys, findAllVehicles, findAllStops с возможностью сортировки по полям: id, name, active.

Реализован метод получения списка транспортных средств с наименьшим количеством свободных мест.

Реализован метод получения списка транспортных средств с наибольшим количеством свободных мест.